## HTTP-сообщения

Аббревиатура HTTP расшифровывается как HyperText Transfer Protocol, «протокол передачи гипертекста». В соответствии со спецификацией OSI, HTTP является протоколом прикладного (верхнего, 7-го) уровня. Актуальная на данный момент версия протокола, HTTP 1.1, описана в спецификации RFC 2616.

Протокол HTTP предполагает использование клиент-серверной структуры передачи данных. __Клиентское приложение формирует запрос и отправляет его на сервер, после чего серверное программное обеспечение обрабатывает данный запрос, формирует ответ и передаёт его обратно клиенту.__ После этого клиентское приложение может продолжить отправлять другие запросы, которые будут обработаны аналогичным образом.


__Есть два типа сообщений: запросы, отправляемые клиентом, чтобы инициировать реакцию со стороны сервера, и ответы от сервера.__

Сообщения HTTP __состоят из текстовой информации в кодировке ASCII, записанной в несколько строк.__ В HTTP/1.1 и более ранних версиях они пересылались в качестве обычного текста. В HTTP/2 текстовое сообщение разделяется на фреймы, что позволяет выполнить оптимизацию и повысить производительность.

Веб разработчики не создают текстовые сообщения HTTP самостоятельно - это делает программа, браузер, прокси или веб-сервер. Они обеспечивают создание HTTP сообщений через конфигурационные файлы (для прокси и серверов), APIs (для браузеров) или другие интерфейсы.


HTTP запросы и ответы имеют близкую структуру. Они состоят из:

 •	Стартовая строка (start line) — используется для описания версии используемого протокола и другой информации — вроде запрашиваемого ресурса или кода ответа. Как можно понять из названия, ее содержимое занимает ровно одну строчку.

•	HTTP-заголовки (HTTP Headers) — несколько строчек текста в определенном формате, которые либо уточняют запрос, либо описывают содержимое тела сообщения.

•	Пустая строка, которая сообщает, что все метаданные для конкретного запроса или ответа были отправлены.

•	Опциональное тело сообщения, которое содержит данные, связанные с запросом, либо документ (например HTML-страницу), передаваемый в ответе. 

### Стартовая строка

__Стартовая строка HTTP-запроса состоит из трех элементов:__

•	Метод HTTP, глагол (например, GET, PUT или POST) или существительное (например, HEAD или OPTIONS), описывающие требуемое действие. Например, GET указывает, что нужно доставить некоторый ресурс, а POST означает отправку данных на сервер (для создания или модификации ресурса, или генерации возвращаемого документа).

•	Цель запроса, обычно URL, или абсолютный путь протокола, порт и домен обычно характеризуются контекстом запроса.

 Формат цели запроса зависит от используемого HTTP-метода. Это может быть:

  1.Абсолютный путь, за которым следует '?' и строка запроса. Это самая распространённая форма, называемая исходной формой (origin form) .   Используется с методами GET, POST, HEAD, и OPTIONS.

  2.Полный URL - абсолютная форма (absolute form) , обычно используется с GET при подключении к прокси.

  3.Компонента URL "authority", состоящая из имени домена и (необязательно) порта (предваряемого символом ':'), называется authority form. Используется только с методом CONNECT при установке туннеля HTTP.

  4.Форма звёздочки (asterisk form), просто "звёздочка" ('*') используется с методом OPTIONS и представляет сервер.


•	Версия HTTP, определяющая структуру оставшегося сообщения, указывая, какую версию предполагается использовать для ответа.


__Ответы (HTTP Responses)__

Строка статуса (Status line) Стартовая строка ответа HTTP, называемая строкой статуса, содержит следующую информацию:

•	Версию протокола, обычно HTTP/1.1.

•	Код состояния (status code), показывающая, был ли запрос успешным. Примеры: 200, 404 или 302

•	Пояснение (status text). Краткое текстовое описание кода состояния, помогающее пользователю понять сообщение HTTP.. Пример строки статуса: HTTP/1.1 404 Not Found.



## HTTP методы

HTTP определяет множество методов запроса, которые указывают, какое желаемое действие выполнится для данного ресурса. Несмотря на то, что их названия могут быть существительными, эти методы запроса иногда называются HTTP глаголами. Каждый реализует свою семантику, но каждая группа команд разделяет общие свойства: так, методы могут быть безопасными, идемпотентными или кешируемыми.

1. __GET__
Метод GET запрашивает представление ресурса. Запросы с использованием этого метода могут только извлекать данные.

2. __HEAD__
HEAD запрашивает ресурс так же, как и метод GET, но без тела ответа.

3. __POST__
POST используется для отправки сущностей к определённому ресурсу. Часто вызывает изменение состояния или какие-то побочные эффекты на сервере.

4. __PUT__
PUT заменяет все текущие представления ресурса данными запроса.

5. __DELETE__
DELETE удаляет указанный ресурс.

6. __CONNECT__
CONNECT устанавливает "туннель" к серверу, определённому по ресурсу.

7. __OPTIONS__
OPTIONS используется для описания параметров соединения с ресурсом.

8. __TRACE__
TRACE выполняет вызов возвращаемого тестового сообщения с ресурса.

9. __PATCH__
PATCH используется для частичного изменения ресурса.


Заголовки запроса

Здесь часто можно встретить <strong>User-Agent</strong> (указывает на окружение, из которой был отправлен запрос; браузер, ОС), <strong>Accept-Language</strong> (человеческие языки, которые понимает клиент), <strong>Referer</strong> (URL ресурса, с которого был переход на текущую страницу), а <strong>Accept-Encoding</strong> (описывает кодировку данных, которую клиент может понимать; например, частый вариант gzip deflate поясняет, что клиент принимает данные, сжатые методом gzip по алгоритму deflate).

Заголовок <strong>Accept</strong>, в свою очередь, указывает те типы контента, которые клиент способен понять, к примеру: text/html, application/xml.

<strong>Cookie</strong> - необязательный заголовок, который передает куки, которые сохранены для данного сервера.

<strong>If-Modified-Since</strong> - содержит дату и время версии запрашиваемого ресурса, с которыми сравнивается текущая версия. Только в случае, если эти даты не совпадают и ресурс был обновлен после указанной даты, сервер отправляет клиенту текущую версию ресурса. Иначе отправляется ответ 304 (Not Modified) и заголовок ответа Last-Modified будет содержать данные последнего обновления.

<strong>Authorization</strong> - содержит данные для подтверждения возможности доступа клиента к ресурсу, нужен для проверки подлинности агента. Заголовок является необязательным.

